# Description : SPIRV-Headers
# URL         : https://www.khronos.org/registry/spir-v
# Maintainer  : camille, camille at lzr dot pw
# Depends on  : cmake ninja

name=spirv-headers
commit=2e1bc6dcd4ff49ed996dc0174d1aec37c2e9ab59
version=20210526
release=1
source=("https://github.com/khronosgroup/$name/archive/$commit.tar.gz")

build() {
    cd "SPIRV-Headers-$commit"

    mkdir build
    cd    build

    cmake ..                             \
        -DCMAKE_INSTALL_PREFIX=/usr      \
        -DCMAKE_INSTALL_LIBDIR=lib       \
        -DCMAKE_BUILD_TYPE=Release       \
        -DSPIRV_HEADERS_SKIP_EXAMPLES=ON \
        -GNinja

    ninja -j "${JOBS:-1}"
    DESTDIR="$PKG" ninja install
}
